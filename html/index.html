<html>
<head>
<title>Torrent Stream Test</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">
<script language='javascript' src='/socket.io/socket.io.js'></script>
<script language='javascript' src='js/socket.io-stream.js'></script>
<script language='javascript' src='https://ajax.googleapis.com/ajax/libs/angularjs/1.4.7/angular.min.js'></script>
<script language='javascript' src='http://gg.gidgette.com:9090/js/api.js'></script>
</head>
<body>
	<div class="container" ng-app="Streamer" ng-controller="sCtrl">
		<div ng-show="(!videoUri)">
			Search: <input type="input" name="query" ng-model="query">
			<input type="button" value="search" ng-click="searchIO.emit('tmdb:search',query)">
		</div>
		<div ng-show="(videoUri)">
			<input type="button" value="back" ng-click="videoUri = null">
		</div>
		<br>
		<div ng-show="(selected) && (!videoUri)">
			<p>{{selected.overview}}<p><br>
			<div ng-show="(!selected.seasons)">
				<p>Loading...</p>
			</div>
			<div ng-show="(selected.seasons) && (!selected.episodes) && (!videoUri)" class="row">
				<div class="col-sm-4" ng-repeat="season in selected.seasons.seasons">
					<div class="thumbnail" ng-show="(season.poster_path)">
						<img ng-click="select(season)" src="http://image.tmdb.org/t/p/w185/{{season.poster_path}}">
						<div class="caption">
							<h3>Season {{season.season_number}}</h3>
						</div>
					</div>
				</div>
			</div>
			<div classs="row" ng-show="(selected.episodes) && (!videoUri)">
				<div class="col-sm-4" ng-repeat="episode in selected.episodes">
					<div class="thumbnail" ng-show="(episode.still_path)">
						<img ng-click="select(episode)" src="http://image.tmdb.org/t/p/w185/{{episode.still_path}}">
						<div class="caption">
							<h3>Ep. {{episode.episode_number}}: {{episode.name}}</h3>
						</div>
					</div>
				</div>
			</div>
			<button class="btn btn-primary" ng-click="back()">Back</button>
			<button class="btn btn-primary" ng-click="streamIO.emit('start',selected.torrent.magnet)" ng-show="(selected.episde_number) || (selected.media_type =='movie')">Play</button>
		</div>
		<div class="row" ng-show="(!selected) && (!videoUri)">
			<div ng-repeat="res in tmdb">
				<div class="col-sm-4" ng-show="(res.poster_path)">
					<div class="thumbnail">
						<img ng-click="select(res)" src="http://image.tmdb.org/t/p/w185/{{res.poster_path}}" ng-show="(res.poster_path)">
						<div class="caption">
							<h3 ng-show="(res.title)">{{res.title}}</h3>
							<h3 ng-show="(res.name)">{{res.name}}</h3>
						</div>
					</div>
				</div>
			</div>
		</div>
		<video id='video' autoplay controls src="{{videoUri}}"  ng-show="(videoUri)"></video>
	</div>
</body>
</html>
